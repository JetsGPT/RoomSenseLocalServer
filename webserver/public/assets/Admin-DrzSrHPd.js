import{c as b,N as $e,u as He,r,ad as u,j as e,m as G,ab as Oe,ac as qe,S as We,Q as V,U as J,V as K,W as Y,B as l,a5 as Ne,L as x,ae as Ge,af as Ve}from"./index-BqfF2MFw.js";import{I as ve,a as we}from"./InfoBlock-BSFsGexk.js";import{I as y}from"./input-BZnAgZ1A.js";import{R as ke,S as Se,T as Je,a as Ke,b as Ce,c as S,d as Ye,e as C}from"./table-B516NjsX.js";import{P as Re,T as Q}from"./trash-2-OWe3h-39.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Xe=b("database",Qe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],es=b("globe",Ze);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],as=b("key",ss);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Pe=b("server",ts);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Ae=b("test-tube",rs);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ns=b("users",ls);function us(){const{settings:n,updateSettings:X}=$e(),{user:h}=He(),[N,D]=r.useState(n.apiBaseUrl),[v,L]=r.useState(n.sensorsApiUrl),[R,F]=r.useState(!1),[B,Z]=r.useState(!1),[w,P]=r.useState(null),[Te,ee]=r.useState(!1),[A,M]=r.useState(null),[se,ae]=r.useState([]),[z,te]=r.useState(!1),[re,$]=r.useState(null),[le,ne]=r.useState(new Set),[k,Ue]=r.useState([]),[i,ie]=r.useState(null),[oe,H]=r.useState([]),[O,de]=r.useState(!1),[q,ce]=r.useState(!1),[d,me]=r.useState(!1),[ue,o]=r.useState(null),[c,g]=r.useState([]),[T,xe]=r.useState(""),[U,he]=r.useState(!1),[p,_]=r.useState(null),[ge,E]=r.useState(""),[j,pe]=r.useState(!1);r.useEffect(()=>{D(n.apiBaseUrl),L(n.sensorsApiUrl)},[n]),r.useEffect(()=>{h?.role==="admin"&&(W(),I())},[h]),r.useEffect(()=>{i?Le(i):(H([]),g([]))},[i]);const _e=async()=>{F(!0);try{X({apiBaseUrl:N,sensorsApiUrl:v}),setTimeout(()=>{F(!1)},500)}catch(s){console.error("Failed to save settings:",s),F(!1)}},Ee=()=>{D("https://localhost:8081/api"),L("https://localhost:8081/api"),X({apiBaseUrl:"https://localhost:8081/api",sensorsApiUrl:"https://localhost:8081/api"})},je=async(s,a)=>{Z(!0),P(null);try{const t=await fetch(`${s}/users/me`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});t.ok?P({type:a,status:"success",message:"Connection successful!"}):P({type:a,status:"error",message:`Connection failed: ${t.status}`})}catch(t){P({type:a,status:"error",message:`Connection failed: ${t.message}`})}finally{Z(!1)}},Ie=async()=>{ee(!0),M(null);try{const s=await Ve.get("/sensors/writeTestData");M({status:"success",message:"Test data written successfully!"})}catch(s){M({status:"error",message:s.response?.data?.error||s.message||"Failed to write test data"})}finally{ee(!1)}},W=async()=>{te(!0),$(null);try{const s=await u.getAllUsers();ae(s)}catch(s){console.error("Error fetching users:",s),$(s.response?.data?.error||s.message||"Failed to fetch users")}finally{te(!1)}},De=async(s,a)=>{ne(t=>new Set(t).add(s));try{const t=await u.updateUserRole(s,a);ae(m=>m.map(be=>be.id===s?t:be))}catch(t){console.error("Error updating user role:",t),$(t.response?.data?.error||t.message||"Failed to update user role")}finally{ne(t=>{const m=new Set(t);return m.delete(s),m})}},I=async()=>{de(!0),o(null);try{const s=await u.getAllRoles();Ue(s)}catch(s){console.error("Error fetching roles:",s),o(s.response?.data?.error||s.message||"Failed to fetch roles")}finally{de(!1)}},Le=async s=>{ce(!0),o(null);try{const a=await u.getRolePermissions(s);H(a.permissions||[]),g(a.permissions||[])}catch(a){console.error("Error fetching role permissions:",a),o(a.response?.data?.error||a.message||"Failed to fetch permissions")}finally{ce(!1)}},Fe=async()=>{if(i){me(!0),o(null);try{const s=await u.updateRolePermissions(i,c);H(s.permissions||[]),g(s.permissions||[])}catch(s){console.error("Error saving permissions:",s),o(s.response?.data?.error||s.message||"Failed to save permissions")}finally{me(!1)}}},Be=()=>{g([...c,{method:"*",path_pattern:"/",match_type:"prefix",allow:!0,rate_limit_max:0,rate_limit_window_ms:0}])},Me=s=>{g(c.filter((a,t)=>t!==s))},f=(s,a,t)=>{const m=[...c];m[s]={...m[s],[a]:t},g(m)},fe=()=>oe.length!==c.length?!0:JSON.stringify(oe)!==JSON.stringify(c),ye=async()=>{if(!T.trim()){o("Role name is required");return}he(!0),o(null);try{await u.createRole(T.trim()),xe(""),await I()}catch(s){console.error("Error creating role:",s),o(s.response?.data?.error||s.message||"Failed to create role")}finally{he(!1)}},ze=async()=>{if(p){pe(!0),o(null);try{const s=ge.trim()||null;await u.deleteRole(p,s),_(null),E(""),await I(),await W(),i===p&&ie(null)}catch(s){console.error("Error deleting role:",s),o(s.response?.data?.error||s.message||"Failed to delete role")}finally{pe(!1)}}};return e.jsx(G.div,{className:"min-h-screen bg-background",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx("div",{className:"container mx-auto px-3 sm:px-6 py-4 sm:py-8",children:e.jsx(Oe,{delay:.1,children:e.jsxs(qe,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(G.div,{className:"flex items-center gap-3 mb-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[e.jsx(We,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin Panel"})]}),e.jsx(G.p,{className:"text-muted-foreground text-lg",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:"Configure API endpoints and system settings"})]}),e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"API Endpoint Configuration"]})}),e.jsxs(Y,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(ve,{title:"Current API Endpoints",children:[e.jsx(we,{label:"Auth API",value:n.apiBaseUrl,icon:es}),e.jsx(we,{label:"Sensors API",value:n.sensorsApiUrl,icon:Pe})]}),e.jsx(ve,{title:"Connection Test",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(l,{onClick:()=>je(N,"auth"),className:"w-full justify-start",variant:"outline",disabled:B,children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Test Auth API"]}),e.jsxs(l,{onClick:()=>je(v,"sensors"),className:"w-full justify-start",variant:"outline",disabled:B,children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Test Sensors API"]}),e.jsxs(l,{onClick:Ie,className:"w-full justify-start",variant:"outline",disabled:Te||B,children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Write Test Data"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Configure API Endpoints"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Auth API Base URL"}),e.jsx(y,{type:"url",value:N,onChange:s=>D(s.target.value),placeholder:"https://localhost:8081/api",className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Base URL for authentication and user management"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Sensors API Base URL"}),e.jsx(y,{type:"url",value:v,onChange:s=>L(s.target.value),placeholder:"https://localhost:8081/api",className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Base URL for sensor data and monitoring"})]})]})]}),w&&e.jsx("div",{className:`p-3 rounded-md border ${w.status==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:e.jsxs("p",{className:`text-sm ${w.status==="success"?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"}`,children:[w.type==="auth"?"Auth API: ":"Sensors API: ",w.message]})}),A&&e.jsx("div",{className:`p-3 rounded-md border ${A.status==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:e.jsxs("p",{className:`text-sm ${A.status==="success"?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"}`,children:["Test Data: ",A.message]})}),(N!==n.apiBaseUrl||v!==n.sensorsApiUrl)&&e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:'You have unsaved API endpoint changes. Click "Save Settings" to apply the new configuration.'})}),R&&e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Saving your settings..."})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-border",children:[e.jsxs(l,{onClick:Ee,variant:"outline",disabled:R,children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Reset to Default"]}),e.jsx(l,{onClick:_e,disabled:R||N===n.apiBaseUrl&&v===n.sensorsApiUrl,className:"px-8",children:R?e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]}),h?.role==="admin"&&e.jsxs(V,{className:"mt-8",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"User Management"]}),e.jsxs(l,{onClick:W,variant:"outline",size:"sm",disabled:z,children:[e.jsx(Ne,{className:`w-4 h-4 mr-2 ${z?"animate-spin":""}`}),"Refresh"]})]})}),e.jsxs(Y,{className:"space-y-4",children:[re&&e.jsx("div",{className:"p-3 rounded-md border bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:re})}),z?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(x,{className:"w-6 h-6 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading users..."})]}):se.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No users found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Je,{children:[e.jsx(Ke,{children:e.jsxs(Ce,{children:[e.jsx(S,{children:"ID"}),e.jsx(S,{children:"Username"}),e.jsx(S,{children:"Role"}),e.jsx(S,{children:"Created At"}),e.jsx(S,{className:"text-right",children:"Actions"})]})}),e.jsx(Ye,{children:se.map(s=>e.jsxs(Ce,{children:[e.jsx(C,{className:"font-medium",children:s.id}),e.jsx(C,{children:s.username}),e.jsxs(C,{children:[e.jsx("select",{value:s.role||"",onChange:a=>De(s.id,a.target.value),disabled:le.has(s.id)||s.id===h?.id||k.length===0,className:"rounded-md border border-input bg-background px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-ring disabled:opacity-50 disabled:cursor-not-allowed",children:k.length===0?e.jsx("option",{value:"",children:"Loading roles..."}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"-- Select role --"}),k.map(a=>e.jsx("option",{value:a,children:a},a))]})}),le.has(s.id)&&e.jsx(x,{className:"w-3 h-3 ml-2 inline animate-spin text-muted-foreground"})]}),e.jsx(C,{children:s.created_at?new Date(s.created_at).toLocaleString():"N/A"}),e.jsx(C,{className:"text-right",children:s.id===h?.id&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"Current user"})})]},s.id))})]})})]})]}),h?.role==="admin"&&e.jsxs(V,{className:"mt-8",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-5 h-5"}),"Roles & Permissions Management"]}),e.jsxs(l,{onClick:I,variant:"outline",size:"sm",disabled:O,children:[e.jsx(Ne,{className:`w-4 h-4 mr-2 ${O?"animate-spin":""}`}),"Refresh Roles"]})]})}),e.jsxs(Y,{className:"space-y-6",children:[ue&&e.jsx("div",{className:"p-3 rounded-md border bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:ue})}),e.jsxs("div",{className:"space-y-2 p-4 border border-border rounded-md bg-card",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Create New Role"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{type:"text",value:T,onChange:s=>xe(s.target.value),placeholder:"Enter role name",disabled:U,className:"flex-1",onKeyDown:s=>{s.key==="Enter"&&!U&&ye()}}),e.jsx(l,{onClick:ye,disabled:U||!T.trim(),size:"sm",children:U?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Create Role"]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Select Role to Manage Permissions"}),O?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-4 h-4 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading roles..."})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:i||"",onChange:s=>ie(s.target.value||null),className:"flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{value:"",children:"-- Select a role --"}),k.map(s=>e.jsx("option",{value:s,children:s},s))]}),i&&e.jsxs(l,{onClick:()=>_(i),variant:"destructive",size:"sm",disabled:j,children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Delete Role"]})]})]}),p&&e.jsxs("div",{className:"p-4 border border-destructive/30 bg-destructive/10 rounded-md space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium text-destructive",children:["Delete Role: ",e.jsx("span",{className:"font-bold",children:p})]}),e.jsx(l,{onClick:()=>{_(null),E("")},variant:"ghost",size:"sm",disabled:j,children:e.jsx(Ge,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Users with this role will have their role set to NULL unless you reassign them."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-foreground",children:"Reassign users to (optional):"}),e.jsxs("select",{value:ge,onChange:s=>E(s.target.value),disabled:j,className:"w-full rounded-md border border-input bg-background px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{value:"",children:"-- No reassignment (set to NULL) --"}),k.filter(s=>s!==p).map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(l,{onClick:()=>{_(null),E("")},variant:"outline",size:"sm",disabled:j,children:"Cancel"}),e.jsx(l,{onClick:ze,variant:"destructive",size:"sm",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Confirm Delete"]})})]})]}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-foreground",children:["Permissions for: ",e.jsx("span",{className:"text-primary",children:i})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{onClick:Be,variant:"outline",size:"sm",disabled:d||q,children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Add Permission"]}),e.jsx(l,{onClick:Fe,size:"sm",disabled:d||q||!fe(),children:d?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Save Permissions"]})})]})]}),q?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(x,{className:"w-6 h-6 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading permissions..."})]}):c.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground border border-dashed rounded-md",children:'No permissions configured. Click "Add Permission" to create one.'}):e.jsx("div",{className:"space-y-3",children:c.map((s,a)=>e.jsx("div",{className:"p-4 border border-border rounded-md bg-card",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Method"}),e.jsxs("select",{value:s.method||"*",onChange:t=>f(a,"method",t.target.value),disabled:d,className:"w-full rounded-md border border-input bg-background px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{value:"*",children:"* (All)"}),e.jsx("option",{value:"GET",children:"GET"}),e.jsx("option",{value:"POST",children:"POST"}),e.jsx("option",{value:"PUT",children:"PUT"}),e.jsx("option",{value:"PATCH",children:"PATCH"}),e.jsx("option",{value:"DELETE",children:"DELETE"}),e.jsx("option",{value:"HEAD",children:"HEAD"}),e.jsx("option",{value:"OPTIONS",children:"OPTIONS"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Path Pattern"}),e.jsx(y,{type:"text",value:s.path_pattern||"/",onChange:t=>f(a,"path_pattern",t.target.value),disabled:d,placeholder:"/api/...",className:"text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Match Type"}),e.jsxs("select",{value:s.match_type||"prefix",onChange:t=>f(a,"match_type",t.target.value),disabled:d,className:"w-full rounded-md border border-input bg-background px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{value:"prefix",children:"Prefix"}),e.jsx("option",{value:"exact",children:"Exact"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Allow"}),e.jsxs("select",{value:s.allow?"true":"false",onChange:t=>f(a,"allow",t.target.value==="true"),disabled:d,className:"w-full rounded-md border border-input bg-background px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{value:"true",children:"Allow"}),e.jsx("option",{value:"false",children:"Deny"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Rate Limit Max"}),e.jsx(y,{type:"number",value:s.rate_limit_max||0,onChange:t=>f(a,"rate_limit_max",parseInt(t.target.value)||0),disabled:d,min:"0",className:"text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Window (ms)"}),e.jsx(y,{type:"number",value:s.rate_limit_window_ms||0,onChange:t=>f(a,"rate_limit_window_ms",parseInt(t.target.value)||0),disabled:d,min:"0",className:"text-sm"})]})]}),e.jsx(l,{onClick:()=>Me(a),variant:"ghost",size:"sm",disabled:d,className:"text-destructive hover:text-destructive",children:e.jsx(Q,{className:"w-4 h-4"})})]})},a))}),fe()&&e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:'You have unsaved permission changes. Click "Save Permissions" to apply them.'})})]})]})]})]})})})})}export{us as Admin,us as default};
