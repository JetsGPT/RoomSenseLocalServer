import{c as h,r,u as C,a as E,b as U,j as e,m as d,T as R,B as m,E as _,L as I}from "./index-BqfF2MFw.js";import{I as g}from "./input-BZnAgZ1A.js";import{U as M}from "./user-DcrN8dRf.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q=h("eye-off",$);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],A=h("lock",z),O=()=>{const[c,y]=r.useState(""),[l,u]=r.useState(""),[o,v]=r.useState(!1),[x,n]=r.useState(""),[t,p]=r.useState(!1),[f,b]=r.useState(!1),{login:j,register:w}=C(),N=E(),k=U().state?.from?.pathname||"/dashboard",L=async a=>{if(a.preventDefault(),n(""),!c||!l){n("Username and password are required");return}p(!0);try{let s;o?s=await w(c,l):s=await j(c,l),s.success?N(k,{replace:!0}):n(s.error||"Authentication failed")}catch(s){let i="An unexpected error occurred";s.response?(i=`Server error (${s.response.status}): ${s.response.data?.message||s.response.data||"Unknown error"}`,console.error("[Login] Server response:",s.response.data)):s.request?(i=`No response from server: ${s.message||"Connection failed"}`,console.error("[Login] Request error:",s.request)):(i=`Error: ${s.message||"Unknown error"}`,console.error("[Login] Error:",s.message)),s.code&&(i+=` (Code: ${s.code})`,console.error("[Login] Error code:",s.code)),s.config&&console.error("[Login] Request URL:",s.config.baseURL+s.config.url),n(i)}finally{p(!1)}},S=()=>{v(a=>!a),n(""),u("")};return e.jsxs(d.div,{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-linear-to-br from-background via-primary/10 to-background px-4 py-10",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(59,130,246,0.25)_0,rgba(59,130,246,0)_45%)]"}),e.jsx(d.div,{className:"relative z-10 w-full max-w-md space-y-8 rounded-3xl border border-border/60 bg-background/95 px-6 py-10 shadow-2xl backdrop-blur-xl md:px-10",initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},children:e.jsxs("div",{className:"space-y-7",children:[e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground md:text-4xl",children:"RoomSense"}),e.jsx(R,{className:"text-3xl font-semibold text-muted-foreground",showSeconds:!0})]}),e.jsx("p",{className:"text-sm text-muted-foreground md:text-base",children:o?"Create a new account to access your smart spaces.":"Welcome back! Sign in to monitor and secure your rooms."})]}),x&&e.jsx(d.div,{className:"rounded-xl border border-destructive/30 bg-destructive/10 px-4 py-3 text-sm text-destructive",initial:{opacity:0,scale:.97},animate:{opacity:1,scale:1},children:x}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"username",className:"text-sm font-medium text-foreground",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center text-muted-foreground",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx(g,{type:"text",id:"username",value:c,onChange:a=>y(a.target.value),disabled:t,autoComplete:"username",className:"w-full pl-9",placeholder:"Enter your username"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-foreground",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center text-muted-foreground",children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx(g,{type:f?"text":"password",id:"password",value:l,onChange:a=>u(a.target.value),disabled:t,autoComplete:o?"new-password":"current-password",className:"w-full pl-9 pr-12",placeholder:"Enter your password"}),e.jsxs(m,{type:"button",variant:"ghost",size:"icon-sm",className:"absolute inset-y-0 right-1 my-1 flex items-center justify-center text-muted-foreground",onClick:()=>b(a=>!a),disabled:t,children:[f?e.jsx(q,{className:"h-4 w-4"}):e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Toggle password visibility"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{type:"submit",size:"lg",variant:"default",disabled:t,className:"w-full",children:t?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 animate-spin"}),"Processing..."]}):o?"Create Account":"Sign In"}),e.jsx(m,{type:"button",size:"lg",variant:"outline",onClick:S,disabled:t,className:"w-full",children:o?"Back to Sign In":"Create Account"})]})]})]})})]})};export{O as default};
